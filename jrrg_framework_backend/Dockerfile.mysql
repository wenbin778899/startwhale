FROM mysql:8.0

# 设置环境变量
ENV MYSQL_ROOT_PASSWORD=SecurePass123!
ENV MYSQL_DATABASE=jrrg_framework_db

# 复制初始化SQL脚本（如果有）
COPY jrrg_framework_backend/*.sql /docker-entrypoint-initdb.d/

# 设置字符集和排序规则
RUN echo "[mysqld]" > /etc/mysql/conf.d/charset.cnf && \
    echo "character-set-server=utf8mb4" >> /etc/mysql/conf.d/charset.cnf && \
    echo "collation-server=utf8mb4_unicode_ci" >> /etc/mysql/conf.d/charset.cnf

# 暴露端口
EXPOSE 3306